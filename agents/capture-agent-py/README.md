# SoundDocs Capture Agent

The SoundDocs Capture Agent is a small application that runs on your local machine to enable professional, multi-channel audio analysis in the SoundDocs web application. It connects to your audio interface, performs the necessary signal processing, and streams the results securely to the browser.

## Fully Automated Setup

The provided `run` scripts are designed to automate the entire setup process, including the installation of necessary tools and SSL certificates.

### Quick Start

1.  **Download the script for your OS:**
    - **macOS/Linux:** `run.sh`
    - **Windows:** `run.bat`
2.  **Run the script from your terminal.**
    - **macOS/Linux:** Open Terminal, navigate to your Downloads (`cd ~/Downloads`), make the script executable (`chmod +x run.sh`), and run it (`./run.sh`).
    - **Windows:** Open Command Prompt or PowerShell, navigate to your Downloads (`cd %USERPROFILE%\Downloads`), and run the script (`run.bat`).

### What the Script Does

The first time you run the script, it will automatically:

1.  **Check for a Package Manager:** It will look for Homebrew (macOS) or Chocolatey (Windows). If not found, it will provide you with a single command to copy/paste to install it.
2.  **Install `mkcert`:** It will use the package manager to install `mkcert`, a tool for creating trusted local certificates.
3.  **Install a Local CA:** It will run `mkcert -install` to create a local Certificate Authority (CA) on your machine. This is a one-time step and may require your password. This makes all certificates generated by `mkcert` trusted by your browsers.
4.  **Generate a Certificate:** It will generate a trusted SSL certificate for `localhost`.
5.  **Set up Python:** It will download the agent, create a Python virtual environment, and install all dependencies.
6.  **Start the Agent:** It will launch the capture agent.

Because the script handles the certificate trust process, you will **not** see any browser security warnings.

### Detailed Instructions

#### macOS & Linux

1.  **Download `run.sh`:** Click the "Download for macOS / Linux" button on the AcoustIQ Pro page.
2.  **Open Terminal:** You can find this in `/Applications/Utilities/Terminal.app`.
3.  **Navigate to Downloads:** Type `cd ~/Downloads` and press Enter.
4.  **Make the script executable:** Type `chmod +x run.sh` and press Enter. This only needs to be done once.
5.  **Run the script:** Type `./run.sh` and press Enter.
6.  **Follow the on-screen prompts:** The script will guide you through any necessary installations (like Homebrew or mkcert) and will ask for your password to install the local CA.

#### Windows

1.  **Download `run.bat`:** Click the "Download for Windows" button on the AcoustIQ Pro page.
2.  **Open Command Prompt or PowerShell:** You can find these by searching in the Start Menu.
3.  **Navigate to Downloads:** Type `cd %USERPROFILE%\Downloads` and press Enter.
4.  **Run the script:** Type `run.bat` and press Enter.
5.  **Follow the on-screen prompts:** The script will guide you through any necessary installations (like Chocolatey or mkcert) and will open a User Account Control (UAC) prompt to install the local CA.

## Local Development

When running the web app in development mode (`pnpm dev`), it will be served at **https://localhost:5173**.

1.  Run the web app dev server: `pnpm --filter web dev`.
2.  Run the Python agent using the appropriate `run` script.
3.  Open **https://localhost:5173** in your browser. The site should load with a valid SSL certificate (a padlock icon).
4.  Navigate to the Analyzer Pro page. The connection to the agent should succeed without any errors.
